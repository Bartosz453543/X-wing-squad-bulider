<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Squadron Builder</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h2>Squadron Builder</h2>
    <div id="squadron"></div>
    <!-- Select do wyboru typu statku -->
    <select id="shipTypeSelect">
      <option value="">Wybierz statek</option>
      <option value="xwing">X‑Wing</option>
      <option value="ywing">Y‑Wing</option>
      <option value="awing">A‑Wing</option>
    </select>
    <!-- Przycisk, który dodaje statek na podstawie wyboru -->
    <button onclick="addShipByType()">Dodaj statek</button>
    <div class="points">
      Total Squadron Points: <span id="totalSquadPoints">0</span>/20
    </div>
    <div class="points">
      Pilot Points: <span id="totalPilotPoints">0</span>
    </div>
    <div class="points">
      Upgrade Points: <span id="totalUpgradePoints">0</span>
    </div>
  </div>
  
  <!-- Dołączamy pliki z regułami -->
  <script src="xwing-rules.js"></script>
  <script src="ywing-rules.js"></script>
  <script src="awing-rules.js"></script>
  <script>
    // Funkcja, która na podstawie wybranego typu statku wywoła odpowiednią metodę modułu
    function addShipByType() {
      const select = document.getElementById("shipTypeSelect");
      const type = select.value;
      if (type === "xwing") {
        xwingRules.addShip();
      } else if (type === "awing") {
        awingRules.addShip();
      } else if (type === "ywing") {
        ywingRules.addShip();
      }
      // Opcjonalnie zresetuj select
      select.selectedIndex = 0;
    }
  
    // Globalna funkcja sumująca punkty
    function updateGlobalTotalPoints() {
      let totalPilot = 0;
      let totalUpgrade = 0;
      const shipSections = document.querySelectorAll('.ship-section');
      shipSections.forEach(section => {
        if (section.classList.contains('xwing')) {
          totalPilot += xwingRules.getPilotPoints(section);
          totalUpgrade += xwingRules.getUpgradePoints(section);
        } else if (section.classList.contains('awing')) {
          totalPilot += awingRules.getPilotPoints(section);
          totalUpgrade += awingRules.getUpgradePoints(section);
        } else if (section.classList.contains('ywing')) {
          totalPilot += ywingRules.getPilotPoints(section);
          totalUpgrade += ywingRules.getUpgradePoints(section);
        }
      });
      document.getElementById("totalPilotPoints").innerText = totalPilot;
      document.getElementById("totalUpgradePoints").innerText = totalUpgrade;
      document.getElementById("totalSquadPoints").innerText = `${totalPilot + totalUpgrade}/20`;
    }
    window.updateGlobalTotalPoints = updateGlobalTotalPoints;
  </script>
</body>
</html>
